import { goToPage, logout, user } from "../index.js";
import { ADD_POSTS_PAGE, AUTH_PAGE, POSTS_PAGE } from "../routes.js";

export function renderHeaderComponent({ element }) {
  element.innerHTML = `
  <div class="page-header">
      <h1 class="logo">instapro</h1>
      <button class="header-button add-or-login-button">
      ${user
      ? `<div title="Добавить пост">
          <svg height="35px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><g id="add_new" data-name="add new"><path d="m16 2a14 14 0 1 0 14 14 14 14 0 0 0 -14-14zm0 26a12 12 0 1 1 12-12 12 12 0 0 1 -12 12z"/><path d="m22.5 15h-5.5v-5.5a1 1 0 0 0 -2 0v5.5h-5.5a1 1 0 0 0 0 2h5.5v5.5a1 1 0 0 0 2 0v-5.5h5.5a1 1 0 0 0 0-2z"/></g></svg>
          </div>`
      : '<svg version="1.1" height="30px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g><g><path d="M421.5,0h-240c-24.813,0-45,20.187-45,45v111c0,8.284,6.716,15,15,15s15-6.716,15-15V45c0-8.271,6.729-15,15-15h240 c8.271,0,15,6.729,15,15v422c0,8.271-6.729,15-15,15h-240c-8.271,0-15-6.729-15-15V356c0-8.284-6.716-15-15-15s-15,6.716-15,15 v111c0,24.813,20.187,45,45,45h240c24.813,0,45-20.187,45-45V45C466.5,20.187,446.313,0,421.5,0z"/></g></g><g><g><path d="M347.643,243.741l-61.421-43.301c-6.771-4.774-16.128-3.153-20.902,3.617c-4.773,6.771-3.154,16.129,3.617,20.903 L291.69,241H60.5c-8.284,0-15,6.716-15,15s6.716,15,15,15h231.19l-22.753,16.042c-6.771,4.773-8.391,14.132-3.617,20.903 c4.776,6.774,14.135,8.389,20.902,3.617l61.421-43.301C356.095,262.303,356.075,249.685,347.643,243.741z"/></g></g></svg>'
    }
      </button>
      ${user
      ? `<div class="logout-button-box"><div>
          <svg height="20px" enable-background="new 0 0 64 64" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><g><g><path d="m9.198 45.492c-.094 0-.19-.014-.285-.041-.529-.158-.831-.715-.673-1.244 2.277-7.654 11.102-10.652 16.158-11.76.537-.117 1.072.223 1.19.764.118.539-.224 1.072-.763 1.189-4.627 1.014-12.685 3.707-14.67 10.377-.128.436-.525.715-.957.715z"/></g><g><path d="m54.801 45.492c-.432 0-.829-.279-.959-.715-1.976-6.648-10.04-9.355-14.672-10.377-.539-.119-.88-.652-.761-1.191s.645-.881 1.192-.762c5.061 1.117 13.89 4.129 16.158 11.76.157.529-.145 1.086-.674 1.244-.095.028-.19.041-.284.041z"/></g><g><path d="m32.051 37.328c-4.141 0-8.038-2.182-10.171-5.691-2.569-4.229-2.163-9.848.988-13.664 2.22-2.689 5.654-4.295 9.188-4.295 1.38 0 2.73.238 4.012.707 4.645 1.701 7.766 6.166 7.766 11.115 0 5.596-3.975 10.473-9.45 11.592-.765.156-1.55.236-2.333.236zm.005-21.65c-2.942 0-5.801 1.334-7.645 3.568-2.618 3.172-2.956 7.84-.822 11.352 1.772 2.918 5.016 4.73 8.462 4.73.649 0 1.299-.066 1.932-.195 4.476-.916 7.851-5.057 7.851-9.633 0-4.049-2.653-7.846-6.453-9.236-1.062-.389-2.181-.586-3.325-.586z"/></g><g><path d="m32.054 58.975c-.001 0-.001 0-.002 0-5.545 0-11.055-1.717-15.514-4.838-7.679-5.371-12.079-14.522-11.484-23.877.59-9.262 6.059-17.732 14.271-22.105 3.842-2.047 8.219-3.129 12.656-3.129 5.03 0 9.91 1.363 14.114 3.941 7.96 4.881 12.904 13.707 12.904 23.033 0 1.15-.073 2.311-.219 3.451-1.171 9.176-7.141 17.27-15.58 21.123-3.441 1.571-7.296 2.401-11.146 2.401zm-.074-51.95c-4.111 0-8.163 1.002-11.717 2.895-7.604 4.049-12.667 11.893-13.213 20.467-.551 8.664 3.524 17.137 10.635 22.111 4.126 2.887 9.229 4.477 14.368 4.477h.001c3.565 0 7.133-.768 10.316-2.221 7.814-3.568 13.342-11.061 14.426-19.557.135-1.057.203-2.131.203-3.197 0-8.635-4.579-16.809-11.949-21.328-3.89-2.385-8.408-3.647-13.07-3.647z"/></g></g></svg>
          <p>${user.name}</p>
          </div>
          <button title="${user.name}" class="header-button logout-button">
          <svg version="1.1" height="30px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g><g><path d="M360.507,171c8.284,0,15-6.716,15-15V45c0-24.813-20.187-45-45-45h-240c-24.813,0-45,20.187-45,45v422 c0,24.813,20.187,45,45,45h240c24.813,0,45-20.187,45-45V356c0-8.284-6.715-15-15-15c-8.284,0-15,6.716-15,15v111 c0,8.271-6.729,15-15,15h-240c-8.271,0-15-6.729-15-15V45c0-8.271,6.729-15,15-15h240c8.271,0,15,6.729,15,15v111 C345.507,164.284,352.223,171,360.507,171z"/></g></g><g><g><path d="M460.15,243.74l-61.421-43.301c-6.771-4.774-16.128-3.153-20.902,3.617c-4.773,6.771-3.154,16.129,3.617,20.903 L404.198,241h-231.19c-8.284,0-15,6.716-15,15s6.716,15,15,15h231.19l-22.754,16.042c-6.771,4.773-8.391,14.132-3.617,20.903 c4.776,6.774,14.135,8.389,20.902,3.617l61.421-43.301C468.685,262.244,468.529,249.646,460.15,243.74z"/></g></g></svg>
          </button></div>`
      : ""
    }  
      </button>
  </div>
  
`;

  element
    .querySelector(".add-or-login-button")
    .addEventListener("click", () => {
      if (user) {
        goToPage(ADD_POSTS_PAGE);
      } else {
        goToPage(AUTH_PAGE);
      }
    });

  element.querySelector(".logo").addEventListener("click", () => {
    goToPage(POSTS_PAGE);
  });

  element.querySelector(".logout-button")?.addEventListener("click", logout);

  return element;
}
